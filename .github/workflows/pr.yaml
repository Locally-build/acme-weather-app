name: PR Validation

on:
  workflow_dispatch:
  pull_request:
    branches: [main]

jobs:
  create_runner:
    name: Create Self Hosted Runners
    uses: ./.github/workflows/deploy_runner.yaml
    secrets: inherit
    with:
      runner_name: weather-app-runner
      github_org_name: Locally-build/acme-weather-app
  build_ubuntu:
    name: Android
    uses: ./.github/workflows/build_android.yaml
    needs: create_runner
    with:
      region: us-east-2
  build_ios:
    name: iOS
    if: false
    uses: ./.github/workflows/build_ios.yaml
    needs: create_runner
    with:
      region: us-east-2
